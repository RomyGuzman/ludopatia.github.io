<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Encuesta Nivel Secundario</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0; padding: 0;
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh;
      background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
      color: #333;
    }
    .container {
      width: 100%; max-width: 500px;
      background: #fff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      animation: fadeIn 0.5s ease-in-out;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
    }
    h2 {
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: #444;
    }
    .option {
      display: block;
      margin: 10px 0;
      padding: 14px;
      border: 2px solid #2575fc;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 500;
    }
    .option:hover {
      background: #2575fc;
      color: white;
    }
    input[type="text"] {
      width: 100%; padding: 12px;
      border: 2px solid #ddd;
      border-radius: 10px;
      margin-bottom: 15px;
      font-size: 1rem;
    }
    button {
      margin-top: 15px;
      padding: 12px 24px;
      background: linear-gradient(135deg, #2575fc 0%, #6a11cb 100%);
      color: white;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      opacity: 0.9;
      transform: scale(1.05);
    }
    .progress-bar {
      height: 8px;
      background: #ddd;
      border-radius: 6px;
      margin-bottom: 20px;
      overflow: hidden;
    }
    .progress {
      height: 8px;
      background: linear-gradient(135deg, #2575fc, #6a11cb);
      width: 0;
      transition: width 0.4s ease;
    }
    .spinner {
      display: flex;
      justify-content: center;
      margin-top: 30px;
    }
    .spinner div {
      width: 16px;
      height: 16px;
      margin: 0 4px;
      background: #2575fc;
      border-radius: 50%;
      animation: bounce 0.6s infinite alternate;
    }
    .spinner div:nth-child(2) { animation-delay: 0.2s; }
    .spinner div:nth-child(3) { animation-delay: 0.4s; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes bounce {
      to { transform: translateY(-12px); opacity: 0.7; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Encuesta sobre Ludopat√≠a</h1>
    <div style="text-align:right; margin-bottom:10px;">
      <label for="lang">Idioma:</label>
      <select id="lang" onchange="cambiarIdioma(this.value)">
        <option value="es">Espa√±ol</option>
        <option value="en">English</option>
        <option value="zh">‰∏≠Êñá</option>
      </select>
    </div>
    <div class="progress-bar"><div id="progress" class="progress"></div></div>
    <div id="quiz"></div>
  </div>

  <script>
    // üîπ Preguntas incrustadas
    const questions = [
      { "pregunta": "1. Edad: seleccionar rango", "tipo": "opcion", "opciones": ["12 ‚Äì 13", "14 ‚Äì 15", "16 ‚Äì 18"] },
      { "pregunta": "2. G√©nero", "tipo": "opcion", "opciones": ["Femenino", "Masculino", "Prefiero no responder", "Otro"] },
      { "pregunta": "3. ¬øHas apostado en l√≠nea alguna vez?", "tipo": "opcion", "opciones": ["S√≠", "No"] },
      { "pregunta": "4. ¬øCon qu√© frecuencia sueles apostar?", "tipo": "opcion", "opciones": ["Todos los d√≠as", "4 a 6 d√≠as por semana", "2 a 3 d√≠as por semana", "1 vez por semana", "Menos de 1 vez por semana"] },
      { "pregunta": "5. ¬øCu√°ntas horas en promedio dedicas a apostar en un d√≠a que lo haces?", "tipo": "opcion", "opciones": ["Menos de 1 hora", "1 a 2 horas", "2 a 3 horas", "M√°s de 3 horas"] },
      { "pregunta": "6. ¬øQu√© d√≠as de la semana sueles apostar?", "tipo": "multiple", "opciones": ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado", "Domingo"] },
      { "pregunta": "7. ¬øEn qu√© tipo de actividades apuestas?", "tipo": "multiple", "opciones": ["Casino online", "Apuestas deportivas", "P√≥ker u otros juegos de cartas", "Juegos de azar (ruleta, tragamonedas, etc.)", "Otro"] },
      { "pregunta": "8. ¬øEn qu√© plataformas o aplicaciones lo haces?", "tipo": "texto" },
      { "pregunta": "9. ¬øLos sitios de apuestas son oficiales (.bet)?", "tipo": "opcion", "opciones": ["S√≠", "No", "No s√©"] },
      { "pregunta": "10. ¬øDe d√≥nde obtienes el dinero para apostar?", "tipo": "opcion", "opciones": ["Dinero de padres", "Trabajo propio", "Pr√©stamo de amigos o familiares", "Otros"] },
      { "pregunta": "11. ¬øCu√°nto dinero sueles apostar en una semana?", "tipo": "opcion", "opciones": ["Menos de $1.000", "Entre $1.000 y $5.000", "Entre $5.000 y $10.000", "M√°s de $10.000"] },
      { "pregunta": "12. ¬øTus padres o tutores saben que apuestas?", "tipo": "opcion", "opciones": ["S√≠", "No", "No estoy seguro"] },
      { "pregunta": "13. ¬øC√≥mo conociste las apuestas online?", "tipo": "opcion", "opciones": ["Redes sociales", "Amigos", "Publicidad", "Otro"] },
      { "pregunta": "14. ¬øPor qu√© apuestas?", "tipo": "multiple", "opciones": ["Diversi√≥n", "Para ganar dinero", "Para pasar el tiempo", "Porque mis amigos lo hacen", "Otro"] },
      { "pregunta": "15. ¬øConoces los riesgos de apostar?", "tipo": "opcion", "opciones": ["S√≠", "No"] },
      { "pregunta": "16. ¬øSabes a d√≥nde acudir o qu√© hacer si tuvieras un problema con las apuestas?", "tipo": "opcion", "opciones": ["S√≠", "No"] },
      { "pregunta": "17. ¬øConoces a alguien que apueste en l√≠nea?", "tipo": "opcion", "opciones": ["S√≠", "No"] },
      { "pregunta": "18. ¬øAlguna vez alguien te recomend√≥ apostar?", "tipo": "opcion", "opciones": ["S√≠", "No"] },
      { "pregunta": "19. ¬øTe gustar√≠a apostar alguna vez?", "tipo": "opcion", "opciones": ["S√≠", "No", "No estoy seguro"] },
      { "pregunta": "20. ¬øConoces los riesgos de apostar?", "tipo": "opcion", "opciones": ["S√≠", "No", "Un poco"] },
      { "pregunta": "21. ¬øSabes a d√≥nde acudir o qu√© hacer si tuvieras un problema con las apuestas?", "tipo": "opcion", "opciones": ["S√≠", "No"] },
      { "pregunta": "22. ¬øHas visto publicidad de apuestas online en redes sociales o internet?", "tipo": "opcion", "opciones": ["S√≠, muchas veces", "Algunas veces", "Nunca"] },
      { "pregunta": "23. ¬øAlguna vez gastaste dinero en un juego (ejemplo: para conseguir monedas, vidas o recompensas)?", "tipo": "opcion", "opciones": ["S√≠", "No"] }
    ];

    let currentQuestion = 0;
    let answers = {};
    let multiAnswers = {};

    // Traducciones de preguntas y opciones
    const traducciones = {
      en: [
        { pregunta: "1. Age: select range", opciones: ["12 ‚Äì 13", "14 ‚Äì 15", "16 ‚Äì 18"] },
        { pregunta: "2. Gender", opciones: ["Female", "Male", "Prefer not to say", "Other"] },
        { pregunta: "3. Have you ever bet online?", opciones: ["Yes", "No"] },
        { pregunta: "4. How often do you usually bet?", opciones: ["Every day", "4 to 6 days a week", "2 to 3 days a week", "Once a week", "Less than once a week"] },
        { pregunta: "5. On average, how many hours do you spend betting on a day you do it?", opciones: ["Less than 1 hour", "1 to 2 hours", "2 to 3 hours", "More than 3 hours"] },
        { pregunta: "6. Which days of the week do you usually bet?", opciones: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"] },
        { pregunta: "7. What types of activities do you bet on?", opciones: ["Online casino", "Sports betting", "Poker or other card games", "Games of chance (roulette, slots, etc.)", "Other"] },
        { pregunta: "8. On which platforms or apps do you do it?", opciones: null },
        { pregunta: "9. Are the betting sites official (.bet)?", opciones: ["Yes", "No", "I don't know"] },
        { pregunta: "10. Where do you get the money to bet?", opciones: ["Parents' money", "Own work", "Loan from friends or family", "Others"] },
        { pregunta: "11. How much money do you usually bet in a week?", opciones: ["Less than $1,000", "Between $1,000 and $5,000", "Between $5,000 and $10,000", "More than $10,000"] },
        { pregunta: "12. Do your parents or guardians know you bet?", opciones: ["Yes", "No", "I'm not sure"] },
        { pregunta: "13. How did you learn about online betting?", opciones: ["Social networks", "Friends", "Advertising", "Other"] },
        { pregunta: "14. Why do you bet?", opciones: ["Fun", "To earn money", "To pass the time", "Because my friends do it", "Other"] },
        { pregunta: "15. Do you know the risks of betting?", opciones: ["Yes", "No"] },
        { pregunta: "16. Do you know where to go or what to do if you had a problem with betting?", opciones: ["Yes", "No"] },
        { pregunta: "17. Do you know anyone who bets online?", opciones: ["Yes", "No"] },
        { pregunta: "18. Has anyone ever recommended you to bet?", opciones: ["Yes", "No"] },
        { pregunta: "19. Would you like to bet someday?", opciones: ["Yes", "No", "I'm not sure"] },
        { pregunta: "20. Do you know the risks of betting?", opciones: ["Yes", "No", "A little"] },
        { pregunta: "21. Do you know where to go or what to do if you had a problem with betting?", opciones: ["Yes", "No"] },
        { pregunta: "22. Have you ever seen online betting ads on social networks or the internet?", opciones: ["Yes, many times", "Sometimes", "Never"] },
        { pregunta: "23. Have you ever spent money on a game (e.g., to get coins, lives or rewards)?", opciones: ["Yes", "No"] }
      ],
      zh: [
        { pregunta: "1. Âπ¥ÈæÑÔºöËØ∑ÈÄâÊã©ËåÉÂõ¥", opciones: ["12 ‚Äì 13", "14 ‚Äì 15", "16 ‚Äì 18"] },
        { pregunta: "2. ÊÄßÂà´", opciones: ["Â•≥ÊÄß", "Áî∑ÊÄß", "‰∏çÊÉ≥ÂõûÁ≠î", "ÂÖ∂‰ªñ"] },
        { pregunta: "3. ‰Ω†ÊõæÁªèÂú®Á∫ø‰∏äËµåÂçöËøáÂêóÔºü", opciones: ["ÊòØ", "Âê¶"] },
        { pregunta: "4. ‰Ω†ÈÄöÂ∏∏Â§ö‰πÖËµåÂçö‰∏ÄÊ¨°Ôºü", opciones: ["ÊØèÂ§©", "ÊØèÂë®4-6Â§©", "ÊØèÂë®2-3Â§©", "ÊØèÂë®1Ê¨°", "ÊØèÂë®‰∏çÂà∞1Ê¨°"] },
        { pregunta: "5. ‰Ω†Âú®ËµåÂçöÁöÑÈÇ£Â§©Âπ≥ÂùáËä±Â§öÂ∞ëÂ∞èÊó∂Ôºü", opciones: ["Â∞ë‰∫é1Â∞èÊó∂", "1Âà∞2Â∞èÊó∂", "2Âà∞3Â∞èÊó∂", "Ë∂ÖËøá3Â∞èÊó∂"] },
        { pregunta: "6. ‰Ω†ÈÄöÂ∏∏Âú®Âì™‰∫õÊòüÊúüÂá†ËµåÂçöÔºü", opciones: ["ÊòüÊúü‰∏Ä", "ÊòüÊúü‰∫å", "ÊòüÊúü‰∏â", "ÊòüÊúüÂõõ", "ÊòüÊúü‰∫î", "ÊòüÊúüÂÖ≠", "ÊòüÊúüÊó•"] },
        { pregunta: "7. ‰Ω†ÂèÇ‰∏éÂì™‰∫õÁ±ªÂûãÁöÑËµåÂçöÊ¥ªÂä®Ôºü", opciones: ["Âú®Á∫øËµåÂú∫", "‰ΩìËÇ≤ÂçöÂΩ©", "ÊâëÂÖãÊàñÂÖ∂‰ªñÁ∫∏ÁâåÊ∏∏Êàè", "Êú∫‰ºöÊ∏∏ÊàèÔºàËΩÆÁõò„ÄÅËÄÅËôéÊú∫Á≠âÔºâ", "ÂÖ∂‰ªñ"] },
        { pregunta: "8. ‰Ω†Âú®Âì™‰∫õÂπ≥Âè∞ÊàñÂ∫îÁî®‰∏äËøõË°åËµåÂçöÔºü", opciones: null },
        { pregunta: "9. Ëøô‰∫õËµåÂçöÁΩëÁ´ôÊòØÂÆòÊñπÁöÑÂêóÔºà.betÔºâÔºü", opciones: ["ÊòØ", "Âê¶", "‰∏çÁü•ÈÅì"] },
        { pregunta: "10. ‰Ω†‰ªéÂì™ÈáåËé∑ÂæóËµåÂçöËµÑÈáëÔºü", opciones: ["Áà∂ÊØçÁöÑÈí±", "Ëá™Â∑±Â∑•‰Ωú", "ÊúãÂèãÊàñÂÆ∂‰∫∫ÂÄüÊ¨æ", "ÂÖ∂‰ªñ"] },
        { pregunta: "11. ‰Ω†‰∏ÄÂë®ÈÄöÂ∏∏ËµåÂçöÂ§öÂ∞ëÈí±Ôºü", opciones: ["Â∞ë‰∫é$1,000", "$1,000-$5,000", "$5,000-$10,000", "Ë∂ÖËøá$10,000"] },
        { pregunta: "12. ‰Ω†ÁöÑÁà∂ÊØçÊàñÁõëÊä§‰∫∫Áü•ÈÅì‰Ω†ËµåÂçöÂêóÔºü", opciones: ["ÊòØ", "Âê¶", "‰∏çÁ°ÆÂÆö"] },
        { pregunta: "13. ‰Ω†ÊòØÂ¶Ç‰Ωï‰∫ÜËß£Á∫ø‰∏äËµåÂçöÁöÑÔºü", opciones: ["Á§æ‰∫§ÁΩëÁªú", "ÊúãÂèã", "ÂπøÂëä", "ÂÖ∂‰ªñ"] },
        { pregunta: "14. ‰Ω†‰∏∫‰ªÄ‰πàËµåÂçöÔºü", opciones: ["Â®±‰πê", "ËµöÈí±", "ÊâìÂèëÊó∂Èó¥", "Âõ†‰∏∫ÊúãÂèã‰πüËµåÂçö", "ÂÖ∂‰ªñ"] },
        { pregunta: "15. ‰Ω†Áü•ÈÅìËµåÂçöÁöÑÈ£éÈô©ÂêóÔºü", opciones: ["ÊòØ", "Âê¶"] },
        { pregunta: "16. Â¶ÇÊûú‰Ω†Âú®ËµåÂçö‰∏≠ÈÅáÂà∞ÈóÆÈ¢òÔºå‰Ω†Áü•ÈÅìËØ•ÂéªÂì™ÈáåÊàñËØ•ÊÄé‰πàÂäûÂêóÔºü", opciones: ["ÊòØ", "Âê¶"] },
        { pregunta: "17. ‰Ω†ËÆ§ËØÜÊúâ‰∫∫Âú®Á∫øËµåÂçöÂêóÔºü", opciones: ["ÊòØ", "Âê¶"] },
        { pregunta: "18. Êúâ‰∫∫ÊõæÁªèÊé®Ëçê‰Ω†ËµåÂçöÂêóÔºü", opciones: ["ÊòØ", "Âê¶"] },
        { pregunta: "19. ‰Ω†ÊÉ≥ËøáÊúâ‰∏ÄÂ§©ÂéªËµåÂçöÂêóÔºü", opciones: ["ÊòØ", "Âê¶", "‰∏çÁ°ÆÂÆö"] },
        { pregunta: "20. ‰Ω†Áü•ÈÅìËµåÂçöÁöÑÈ£éÈô©ÂêóÔºü", opciones: ["ÊòØ", "Âê¶", "Êúâ‰∏ÄÁÇπ"] },
        { pregunta: "21. Â¶ÇÊûú‰Ω†Âú®ËµåÂçö‰∏≠ÈÅáÂà∞ÈóÆÈ¢òÔºå‰Ω†Áü•ÈÅìËØ•ÂéªÂì™ÈáåÊàñËØ•ÊÄé‰πàÂäûÂêóÔºü", opciones: ["ÊòØ", "Âê¶"] },
        { pregunta: "22. ‰Ω†Âú®Á§æ‰∫§ÁΩëÁªúÊàñ‰∫íËÅîÁΩë‰∏äËßÅËøáÁ∫ø‰∏äËµåÂçöÂπøÂëäÂêóÔºü", opciones: ["ÊòØÔºåÁªèÂ∏∏", "ÊúâÊó∂", "‰ªéÊú™"] },
        { pregunta: "23. ‰Ω†ÊõæÁªèÂú®Ê∏∏Êàè‰∏≠Ëä±Èí±ÂêóÔºà‰æãÂ¶ÇÔºöË¥≠‰π∞ÈáëÂ∏Å„ÄÅÁîüÂëΩÊàñÂ•ñÂä±ÔºâÔºü", opciones: ["ÊòØ", "Âê¶"] }
      ]
    };

    let idioma = "es"; // idioma actual

    function cambiarIdioma(lang) {
      idioma = lang;
      renderQuestion(questions, currentQuestion);
    }

    function updateProgress() {
      let percent = ((currentQuestion) / questions.length) * 100;
      document.getElementById("progress").style.width = percent + "%";
    }

    function renderQuestion(questions, index) {
      if (index >= questions.length) {
        enviarRespuestas();
        return;
      }

      updateProgress();

      // Selecciona el texto seg√∫n idioma
      let q = questions[index];
      let qTrad = idioma === "es" ? q : traducciones[idioma][index];
      let html = `<h2>${qTrad.pregunta}</h2>`;

      if (q.tipo === "opcion") {
        q.opciones.forEach((opt, i) => {
          // Mostrar traducci√≥n pero guardar respuesta en espa√±ol
          let optTrad = idioma === "es" ? opt : traducciones[idioma][index].opciones[i];
          html += `<div class="option" onclick="next(${index}, '${opt.replace(/'/g,"\\'")}', questions)">${optTrad}</div>`;
        });
      } else if (q.tipo === "multiple") {
        q.opciones.forEach((opt, i) => {
          let optTrad = idioma === "es" ? opt : traducciones[idioma][index].opciones[i];
          html += `<label class="option">
            <input type="checkbox" value="${opt.replace(/'/g,"\\'")}" onchange="saveMultiple(${index}, this.value, this.checked)">
            ${optTrad}
          </label>`;
        });
        html += `<button onclick="nextMultiple(${index}, questions)">${idioma === "zh" ? "‰∏ã‰∏ÄÊ≠•" : idioma === "en" ? "Next" : "Siguiente"}</button>`;
      } else if (q.tipo === "texto") {
        html += `<input type="text" id="text${index}" placeholder="${idioma === "zh" ? "ËØ∑ËæìÂÖ•‰Ω†ÁöÑÁ≠îÊ°à" : idioma === "en" ? "Type your answer" : "Escribe tu respuesta"}">`;
        html += `<button onclick="nextText(${index}, questions)">${idioma === "zh" ? "‰∏ã‰∏ÄÊ≠•" : idioma === "en" ? "Next" : "Siguiente"}</button>`;
      }

      document.getElementById("quiz").innerHTML = html;
    }

    function next(index, answer, questions) {
      answers[index+1] = answer;
      currentQuestion++;
      renderQuestion(questions, currentQuestion);
    }

    function saveMultiple(index, value, checked) {
      if (!multiAnswers[index]) multiAnswers[index] = [];
      if (checked) multiAnswers[index].push(value);
      else multiAnswers[index] = multiAnswers[index].filter(v => v !== value);
    }

    function nextMultiple(index, questions) {
      answers[index+1] = multiAnswers[index] || [];
      currentQuestion++;
      renderQuestion(questions, currentQuestion);
    }

    function nextText(index, questions) {
      const val = document.getElementById("text"+index).value;
      answers[index+1] = val;
      currentQuestion++;
      renderQuestion(questions, currentQuestion);
    }

    function enviarRespuestas() {
      document.getElementById("quiz").innerHTML =
        `<h2>${idioma === "zh" ? "Ê≠£Âú®Êèê‰∫§Á≠îÊ°à..." : idioma === "en" ? "Sending answers..." : "Enviando respuestas..."}</h2>
        <div class="spinner">
          <div></div><div></div><div></div>
        </div>`;

      // üîπ CAMBIA esta URL por la de tu webhook en n8n
      fetch("https://TU_SERVIDOR_N8N/webhook/encuesta", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(answers)
      })
      .then(res => res.json())
      .then(data => {
        document.getElementById("quiz").innerHTML =
          `<h2>${idioma === "zh" ? "ÊÑüË∞¢ÊÇ®ÁöÑÂèÇ‰∏éÔºÅ" : idioma === "en" ? "Thank you for your response! üéâ" : "¬°Gracias por responder! üéâ"}</h2>
          <p>${idioma === "zh" ? "ÊÇ®ÁöÑÂõûÁ≠îÂ∑≤ÊàêÂäüÊèê‰∫§„ÄÇ" : idioma === "en" ? "Your participation was successfully recorded." : "Tu participaci√≥n fue registrada con √©xito."}</p>`;
      })
      .catch(err => {
        console.error("Error al enviar:", err);
        document.getElementById("quiz").innerHTML =
          `<h2>${idioma === "zh" ? "Êèê‰∫§Â§±Ë¥•" : idioma === "en" ? "Submission failed" : "Hubo un error al enviar los datos üò¢"}</h2>
          <p>${idioma === "zh" ? "ËØ∑Á®çÂêéÂÜçËØï„ÄÇ" : idioma === "en" ? "Please try again later." : "Intenta m√°s tarde."}</p>`;
      });
    }

    // iniciar
    renderQuestion(questions, currentQuestion);
  </script>
</body>
</html>

